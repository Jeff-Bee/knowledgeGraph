/**
 * 图谱数据源
 */
export const data = [
    {
        id:10000,
        name:'盗墓笔记重启[南派三叔所著小说]',
        categary:'百科',
        children:[
            {
                id:2,
                name:'盗墓笔记重启',
                categary:'中文名称',
            },
            {
                id:3,
                name:'南派三叔',
                categary:'作者',
                children:[
                    {
                        id:301,
                        name:'企业家',
                        categary:'职业',
                        children:[
                            {
                                id:30101,
                                name:'冒险家，创新者',
                                categary:'特征',
                            },
                            {
                                id:30102,
                                name:'掌控者，领导者',
                                categary:'企业角色',
                            },
                            {
                                id:30103,
                                name:'entrepreneur',
                                categary:'外文名',
                            }
                        ]
                    },
                    {
                        id:302,
                        name:'南派三叔',
                        categary:'别名',
                    },
                    {
                        id:303,
                        name:'浙江省嘉兴市嘉善县',
                        categary:'出生地',
                    },
                    {
                        id:304,
                        name:'第七届中国作家富豪榜最佳冒险小说奖',
                        categary:'主要成就',
                    }
                ],
            },
            {
                id:4,
                name:'悬疑',
                categary:'类型',
            },
            {
                id:5,
                name:'悬疑',
                categary:'连载状态',
            },
            {
                id:6,
                name:'连载平台',
                categary:'个人微信公众号和互联网上',
            },
            {
                id:7,
                name:'最新章节',
                categary:'重启·极海听雷第两百二十四章结局了',
            },
            {
                id:8,
                name:'小说主角',
                categary:'吴邪、胖子、张起灵',
            },
            {
                id:9,
                name:'连载状态',
                categary:'连载中',
            }
        ]
    },
    {
        id:20000,
        name:'人工智能[计算机科学的一个分支]',
        categary:'百科',
        children: [{
            "id": 1599811251651,
            "name": "人工智能",
            "categary": "中文名"
        }, {
            "id": 1599811251652,
            "name": "ARTIFICIALINTELLIGENCE",
            "categary": "外文名"
        }, {
            "id": 1599811251653,
            "name": "AI",
            "categary": "简称"
        }, {
            "id": 1599811251654,
            "name": "1956年",
            "categary": "提出时间"
        }, {
            "id": 1599811251655,
            "name": "DARTMOUTH学会",
            "categary": "提出地点"
        }, {
            "id": 1599811251656,
            "name": "雨果·德·加里斯的著作",
            "categary": "名称来源"
        }]
    },
    {
        id:30000,
        name:'姚明[亚洲篮球联合会主席、中国篮球协会主席]',
        categary:'百科',
        children: [{
            "id": 1599811494936,
            "name": "YaoMing",
            "categary": "外文名"
        }, {
            "id": 1599811494937,
            "name": "明王",
            "categary": "别名"
        }, {
            "id": 1599811494938,
            "name": "移动长城",
            "categary": "别名"
        }, {
            "id": 1599811494939,
            "name": "小巨人",
            "categary": "别名"
        }, {
            "id": 1599811494930,
            "name": "大姚",
            "categary": "别名"
        }, {
            "id": 1599811494931,
            "name": "中国",
            "categary": "国籍"
        }, {
            "id": 1599811494932,
            "name": "汉族",
            "categary": "民族"
        }]
    },
    {
        id:40000,
        name:'知识图谱',
        categary:'百科',
        children: [{
            "id": 1599813559392,
            "name": "知识图谱",
            "categary": "中文名"
        }, {
            "id": 1599813559393,
            "name": "KnowledgeGraph/Vault",
            "categary": "外文名"
        }, {
            "id": 1599813559394,
            "name": "科学知识图谱",
            "categary": "也称"
        }, {
            "id": 1599813559395,
            "name": "理论与方法与计量学引文分析",
            "categary": "应用"
        }]
    },
    {
        id:50000,
        name:'刘德华[中国香港男演员、歌手、制片人、填词人]',
        categary:'百科',
        children: [{
            "id": 1599813694131,
            "name": "AndyLau，LauTakWah",
            "categary": "外文名"
        }, {
            "id": 1599813694132,
            "name": "华仔，华Dee，华哥等",
            "categary": "别名"
        }, {
            "id": 1599813694133,
            "name": "中国",
            "categary": "国籍"
        }, {
            "id": 1599813694134,
            "name": "汉族",
            "categary": "民族"
        }, {
            "id": 1599813694135,
            "name": "天秤座",
            "categary": "星座"
        }, {
            "id": 1599813694136,
            "name": "AB型",
            "categary": "血型"
        }, {
            "id": 1599813694137,
            "name": "174cm",
            "categary": "身高"
        }, {
            "id": 1599813694138,
            "name": "63kg",
            "categary": "体重"
        }]
    },
    {
        id:60000,
        name:'番茄[茄科茄属植物]',
        categary:'百科',
        children: [{
            "id": 1599813839207,
            "name": "Solanumlycopersicum",
            "categary": "拉丁学名"
        }, {
            "id": 1599813839208,
            "name": "蕃柿、西红柿、洋柿子",
            "categary": "别称"
        }, {
            "id": 1599813839209,
            "name": "植物界",
            "categary": "界"
        }, {
            "id": 1599813839210,
            "name": "被子植物门",
            "categary": "门"
        }, {
            "id": 1599813839211,
            "name": "双子叶植物纲",
            "categary": "纲"
        }, {
            "id": 1599813839212,
            "name": "合瓣花亚纲",
            "categary": "亚纲"
        }, {
            "id": 1599813839213,
            "name": "管状花目",
            "categary": "目"
        }, {
            "id": 1599813839214,
            "name": "茄科",
            "categary": "科"
        }]
    },
    {
        id:70000,
        name:'周杰伦',
        categary:'百科',
        children: [{
            "id": 1599813927218,
            "name": "JayChou",
            "categary": "外文名"
        }, {
            "id": 1599813927219,
            "name": "周董",
            "categary": "别名"
        }, {
            "id": 1599813927220,
            "name": "中国",
            "categary": "国籍"
        }, {
            "id": 1599813927221,
            "name": "汉族",
            "categary": "民族"
        }, {
            "id": 1599813927222,
            "name": "摩羯座",
            "categary": "星座"
        }, {
            "id": 1599813927223,
            "name": "O型",
            "categary": "血型"
        }, {
            "id": 1599813927224,
            "name": "175cm",
            "categary": "身高"
        }, {
            "id": 1599813927225,
            "name": "台湾省新北市",
            "categary": "出生地"
        }]
    },
    {
        id:80000,
        name:'苏州大学',
        categary:'百科',
        children: [{
            "id": 1599813971854,
            "name": "SoochowUniversity",
            "categary": "外文名"
        }, {
            "id": 1599813971855,
            "name": "苏大",
            "categary": "简称"
        }, {
            "id": 1599813971856,
            "name": "1900年5月18日（清光绪二十六年）",
            "categary": "创办时间"
        }, {
            "id": 1599813971857,
            "name": "公立大学",
            "categary": "类别"
        }, {
            "id": 1599813971858,
            "name": "综合类",
            "categary": "类型"
        }, {
            "id": 1599813971859,
            "name": "211工程",
            "categary": "属性"
        }, {
            "id": 1599813971860,
            "name": "省部共建大学",
            "categary": "属性"
        }, {
            "id": 1599813971861,
            "name": "卓越工程师教育培养计划",
            "categary": "属性"
        }]
    },
    {
        id:90000,
        name:'机器人[自动执行工作的机器装置]',
        categary:'百科',
        children: [{
            "id": 1599814026913,
            "name": "Robot",
            "categary": "外文名"
        }, {
            "id": 1599814026914,
            "name": "自动执行工作的机器装置",
            "categary": "定义"
        }, {
            "id": 1599814026915,
            "name": "人工智能技术",
            "categary": "技术"
        }, {
            "id": 1599814026916,
            "name": "微型计算机",
            "categary": "驱动装置"
        }, {
            "id": 1599814026917,
            "name": "电能",
            "categary": "驱动能源"
        }]
    }

]

/**
 * 模糊查询大类
 * @param {*} name 
 */
export const search = (name)=>{
    return new Promise((resolve,reject)=>{
        let result = []
        let list = data.filter(item=>item.name.indexOf(name)>=0)
        if(list&&list.length>0){
            result = list||[]
        }
        if(result.length>0){
            resolve(result)
        }else{
            reject()
        }
    })
}

/**
 * 点击节点展开
 * @param {*} id 
 */
export const expendNodes = (id)=>{
    return new Promise((resolve,reject)=>{
        let totalList = []
        //拆除来所有的children到第一层
        data.forEach(item=>{
            getDeepChildrens(totalList,item,0)
        })

        let list = []
        for(let item of totalList){
            if(item.parentId.toString() === id){
                const {children,...reset} = item
                list.push({
                    ...reset
                })
            }
        }
        if(list.length>0){
            resolve(list)
        }else{
            reject()
        }
        
    })
    
}

/**
 * 递归数组,把所有children都拆出来到第一层
 * @param {*} list 
 * @param {*} item 
 */
function getDeepChildrens(list,item,parentId){
    const {children,...reset} =  item
    list.push(
        {
            ...reset,
            parentId,
        }
    )
    if(children&&children.length>0){
        children.forEach(child=>{
            getDeepChildrens(list,child,item.id)
        })
    }
}

/**
 * 分类数据
 */
export const categarys =  ["人工智能","知识图谱","姚明","刘德华","机器人","周杰伦","苏州大学","番茄","盗墓笔记","机器人","人工智能","知识图谱","姚明","刘德华","机器人","人工智能","知识图谱","姚明","刘德华","机器人","人工智能","知识图谱","姚明","刘德华","机器人","人工智能","知识图谱","姚明","刘德华","机器人"]